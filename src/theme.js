const THEME_KEY='site-theme-preference',themes={SYSTEM:'system',LIGHT:'light',DARK:'dark'};function getThemePreference(){return localStorage.getItem(THEME_KEY)||themes.SYSTEM}function setThemePreference(t){if(Object.values(themes).includes(t))localStorage.setItem(THEME_KEY,t),applyTheme(t)}function applyTheme(t){const e=document.documentElement;t===themes.SYSTEM?(e.removeAttribute('data-theme'),e.style.colorScheme=''):t===themes.LIGHT?(e.setAttribute('data-theme','light'),e.style.colorScheme='light'):t===themes.DARK&&(e.setAttribute('data-theme','dark'),e.style.colorScheme='dark'),window.dispatchEvent(new CustomEvent('theme-changed',{detail:{theme:t}}))}function getEffectiveTheme(){const t=getThemePreference();return t===themes.SYSTEM?window.matchMedia('(prefers-color-scheme: dark)').matches?themes.DARK:themes.LIGHT:t}applyTheme(getThemePreference()),getThemePreference()===themes.SYSTEM&&window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',()=>applyTheme(themes.SYSTEM)),window.getThemePreference=getThemePreference,window.setThemePreference=setThemePreference,window.getEffectiveTheme=getEffectiveTheme;